<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0"
    />
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="screen-orientation" content="portrait" />
    <title>Repro WebAR</title>

    <link rel="icon" href="/favicon.ico" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="stylesheet" href="/src/styles/style.css" />

    <!-- ✅ Importa A-Frame y MindAR desde CDN para mayor compatibilidad -->
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.5.0/dist/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <!-- ✅ Tu script de inicialización (puede ser main.js compilado desde main.ts) -->
    <script type="module" src="/src/main.ts"></script>
  </head>

  <body>
    <!-- 🚨 Mensaje si la cámara falla -->
    <div id="cam-error">🚫 No se pudo acceder a la cámara. Revisa los permisos.</div>

    <!-- ℹ️ Información del marcador -->
    <div id="marker-info">Marcador: ---</div>

    <!-- 📷 Video manual del feed de cámara -->
    <video
      id="mindar-video"
      autoplay
      muted
      playsinline
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        background: black;
        z-index: 0;
        display: block;
        opacity: 1;
        visibility: visible;
        pointer-events: none;
      "
    ></video>

    <!-- 🌐 Escena WebAR con A-Frame y MindAR -->
    <a-scene
      mindar-image="imageTargetSrc: assets/targets.mind; maxTrack: 22"
      embedded
      color-space="sRGB"
      renderer="antialias: true; alpha: true"
      device-orientation-permission-ui="enabled: true"
    >
      <!-- 🛠️ Componente de debug -->
      <a-entity debug-log></a-entity>

    <a-assets>
      <!-- Videos pre-cargados -->
      <video id="video1" src="assets/videos/video1.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video2" src="assets/videos/video2.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video3" src="assets/videos/video3.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video4" src="assets/videos/video4.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video5" src="assets/videos/video5.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video6" src="assets/videos/video6.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video7" src="assets/videos/video7.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video8" src="assets/videos/video8.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video9" src="assets/videos/video9.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video10" src="assets/videos/video10.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video11" src="assets/videos/video11.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video12" src="assets/videos/video12.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video13" src="assets/videos/video13.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video14" src="assets/videos/video14.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video15" src="assets/videos/video15.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video16" src="assets/videos/video16.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video17" src="assets/videos/video17.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video18" src="assets/videos/video18.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video19" src="assets/videos/video19.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video20" src="assets/videos/video20.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video21" src="assets/videos/video21.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
      <video id="video22" src="assets/videos/video22.mp4" preload="auto" crossorigin="anonymous" loop muted playsinline></video>
    </a-assets>

  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <!-- Entidades para cada marcador -->
    <a-entity mindar-image-target="targetIndex: 0" marker-events>
      <a-video src="#video1" width="1" height="1.6" position="0 0 0" rotation="-0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 1" marker-events>
      <a-video src="#video2" width="1" height="1.6" position="0 0 0" rotation="-0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 2" marker-events>
      <a-video src="#video3" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 3" marker-events>
      <a-video src="#video4" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 4" marker-events>
      <a-video src="#video5" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 5" marker-events>
      <a-video src="#video6" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 6" marker-events>
      <a-video src="#video7" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 7" marker-events>
      <a-video src="#video8" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 8" marker-events>
      <a-video src="#video9" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 9" marker-events>
      <a-video src="#video10" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 10" marker-events>
      <a-video src="#video11" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 11" marker-events>
      <a-video src="#video12" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 12" marker-events>
      <a-video src="#video13" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 13" marker-events>
      <a-video src="#video14" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 14" marker-events>
      <a-video src="#video15" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 15" marker-events>
      <a-video src="#video16" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 16" marker-events>
      <a-video src="#video17" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 17" marker-events>
      <a-video src="#video18" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 18" marker-events>
      <a-video src="#video19" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 19" marker-events>
      <a-video src="#video20" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 20" marker-events>
      <a-video src="#video21" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>
    <a-entity mindar-image-target="targetIndex: 21" marker-events>
      <a-video src="#video22" width="1" height="1.6" position="0 0 0" rotation="0 0 0"></a-video>
    </a-entity>

    <!-- 💡 Iluminación -->
    <a-entity light="type: ambient; intensity: 0.5"></a-entity>
    <a-entity light="type: point; intensity: 2; distance: 10; decay: 2" position="0 2 2"></a-entity>
  </a-scene>
</body>
</html>